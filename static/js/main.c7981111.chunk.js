(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{14:function(e,t,n){e.exports=n(22)},22:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(13),l=n.n(o),s=n(11),c=n(1),i=n(8),u=n.n(i),m=n(10),p=n(3),d=n(4),h=n(6),b=n(5),f=n(7),y=n(2),E=(n(9),n(21)),v=function(e){var t,n=e.person,a=e.selectedPerson,o=e.markByClick,l=E((t={person:n,"person--male":"m"===n.sex,"person--female":"f"===n.sex,"person--lived-more-than-65-years":n.age>65,"person--father":"m"===n.sex&&n.children,"person--mother":"f"===n.sex&&n.children},Object(y.a)(t,"person--lived-in-".concat(n.century),!0),Object(y.a)(t,"person--selected",a===n.id),t)),s=E({"person--born-before-1650":n.born<1650,"person--died-after-1800":n.died>1800});return r.a.createElement("tr",{className:l,onClick:function(){return o(n.id)}},r.a.createElement("td",null,n.id),r.a.createElement("td",{className:s},n.name),r.a.createElement("td",null,n.sex),r.a.createElement("td",null,n.born),r.a.createElement("td",null,n.died),r.a.createElement("td",null,n.age),r.a.createElement("td",null,n.century),r.a.createElement("td",null,n.mother),r.a.createElement("td",null,n.father),r.a.createElement("td",null,n.children))};v.defaultProps={selectedPerson:null,markByClick:function(){}};var w=v,C=function(e){function t(){var e,n;Object(p.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(h.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(r)))).columnNames=["id","name","sex","born","died","age","century","father","mother","children"],n.state={selectedPerson:null},n.markByClick=function(e){n.setState({selectedPerson:e})},n}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this,t=this.props.people,n=this.state.selectedPerson;return r.a.createElement("table",{className:"PeopleTable"},r.a.createElement("thead",null,r.a.createElement("tr",{className:"thead"},this.columnNames.map(function(e){return r.a.createElement("th",{key:e},e)}))),r.a.createElement("tbody",null,t.map(function(t){return r.a.createElement(w,{key:t.id,person:t,selectedPerson:n,markByClick:e.markByClick})})))}}]),t}(r.a.Component),g=function(e){function t(){var e,n;Object(p.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(h.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(r)))).state={userMap:{name:"",sex:"f",born:null,died:null,father:"",mother:""},errorsMap:{died:""}},n.handleFieldChange=function(e){var t=e.target,a=t.name,r=t.value;n.setState(function(e){return{userMap:Object(c.a)({},e.userMap,Object(y.a)({},a,"name"===a?r.replace(/[^\w|\d]/,""):r)),errorsMap:Object(c.a)({},e.errorsMap,Object(y.a)({},a,""))}})},n.handleFormSubmit=function(e){e.preventDefault();var t=n.state.userMap,a=n.props.onSubmit;t.died-t.born<0||t.died-t.born>150?n.setState(function(e){return{userMap:Object(c.a)({},e.userMap),errorsMap:Object(c.a)({},e.errorsMap,{died:"Incorrect the year of born and/or the year of death."})}}):(a(t),n.setState(function(e){return{userMap:Object(c.a)({},e.userMap,{name:"",sex:"f",born:null,died:null,father:"",mother:""})}}))},n}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props.closeForm,t=this.state,n=t.userMap,a=t.errorsMap;return r.a.createElement("div",{className:"shown-form"},r.a.createElement("form",{className:"form-wrap",onSubmit:this.handleFormSubmit},r.a.createElement("input",{type:"text",placeholder:"Enter name",name:"name",defaultValue:n.name,className:"input",required:"true",onChange:this.handleFieldChange}),r.a.createElement("label",{htmlFor:"new-person-sex__man",className:"radio-btn"},r.a.createElement("input",{id:"new-person-sex__man",type:"radio",value:"m",name:"sex",onChange:this.handleFieldChange}),"Man"),r.a.createElement("label",{htmlFor:"new-person-sex__woman",className:"radio-btn"},r.a.createElement("input",{id:"new-person-sex__woman",type:"radio",value:"f",name:"sex",onChange:this.handleFieldChange}),"Woman"),r.a.createElement("input",{type:"text",placeholder:"Enter the year of born",className:"input",name:"born",defaultValue:n.born,required:"true",onChange:this.handleFieldChange}),r.a.createElement("input",{type:"text",placeholder:"Enter the year of death",className:"input",name:"died",defaultValue:n.died,required:"true",onChange:this.handleFieldChange}),a.died&&r.a.createElement("div",{className:"error"},a.died),r.a.createElement("input",{type:"text",placeholder:"Enter father's name",className:"input",name:"father",defaultValue:n.father,required:"true",onChange:this.handleFieldChange}),r.a.createElement("input",{type:"text",placeholder:"Enter mother's name",className:"input",name:"mother",defaultValue:n.mother,required:"true",onChange:this.handleFieldChange}),r.a.createElement("button",{type:"submit",className:"btn-add"},"Add"),r.a.createElement("button",{type:"submit",className:"btn-close",onClick:e},"Close")))}}]),t}(r.a.Component);g.defaultProps={closeForm:function(){}};var j=g,N=function(){var e=Object(m.a)(u.a.mark(function e(){var t,n;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return"https://mate-academy.github.io/react_people-table/api",e.next=3,fetch("".concat("https://mate-academy.github.io/react_people-table/api","/people.json"));case 3:return t=e.sent,e.next=6,t.json();case 6:return n=e.sent,e.abrupt("return",n.map(function(e,t){return Object(c.a)({},e,{age:e.died-e.born,century:Math.ceil(e.died/100),id:t+1,fatherData:n.filter(function(t){return e.father===t.name}),motherData:n.filter(function(t){return e.mother===t.name}),children:n.filter(function(t){return e.name===t.mother||e.name===t.father}).map(function(e){return e.name}).join(", ")})}));case 8:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),O=function(e){function t(){var e,n;Object(p.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(h.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(r)))).state={people:[],visiblePeople:[],value:"",shownForm:!1},n.componentDidMount=Object(m.a)(u.a.mark(function e(){var t;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N();case 2:t=e.sent,n.setState({people:t,visiblePeople:t});case 4:case"end":return e.stop()}},e)})),n.filterBy=function(e){var t=e.target.value.toLowerCase();n.setState(function(e){return{visiblePeople:e.people.filter(function(e){return e.name.toLowerCase().includes(t)||e.father&&e.father.toLowerCase().includes(t)||e.mother&&e.mother.toLowerCase().includes(t)})}}),n.setState({value:e.target.value})},n.sortBy=function(e){"name"===e?n.setState(function(t){return{visiblePeople:t.visiblePeople.sort(function(t,n){return t[e].localeCompare(n[e])})}}):n.setState(function(t){return{visiblePeople:t.visiblePeople.sort(function(t,n){return t[e]-n[e]})}})},n.showForm=function(){n.setState({shownForm:!0})},n.closeForm=function(e){e.preventDefault(),n.setState({shownForm:!1})},n.addNewPerson=function(e){e=Object(c.a)({},e,{age:e.died-e.born,century:Math.ceil(e.died/100),id:n.state.people.length+1}),n.setState(function(t){return{visiblePeople:[].concat(Object(s.a)(t.visiblePeople),[e]),people:[].concat(Object(s.a)(t.people),[e]),shownForm:!1}})},n}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this,t=this.state,n=t.shownForm,a=t.people,o=t.value,l=t.visiblePeople,s=t.markedAPersonRow;return r.a.createElement("div",{className:"App"},r.a.createElement("button",{type:"submit",className:"btn-new-person",onClick:this.showForm},"Add a new person"),n&&r.a.createElement(j,{onSubmit:this.addNewPerson,closeForm:this.closeForm}),r.a.createElement("h1",null,"People table\xa0 (",a.length,"\xa0people)"),r.a.createElement("label",{htmlFor:"filter",className:"person--filter"},"Filter by\xa0",r.a.createElement("input",{id:"filter",type:"text",placeholder:"enter text",value:o,onChange:this.filterBy})),r.a.createElement("div",{className:"button-list"},r.a.createElement("button",{type:"submit",className:"button-sort",onClick:function(){return e.sortBy("id")}},"Sort by ID"),r.a.createElement("button",{type:"submit",className:"button-sort",onClick:function(){return e.sortBy("name")}},"Sort by NAME"),r.a.createElement("button",{type:"submit",className:"button-sort",onClick:function(){return e.sortBy("born")}},"Sort by BORN"),r.a.createElement("button",{type:"submit",className:"button-sort",onClick:function(){return e.sortBy("died")}},"Sort by DIED"),r.a.createElement("button",{type:"submit",className:"button-sort",onClick:function(){return e.sortBy("age")}},"Sort by AGE")),r.a.createElement(C,{people:l,markedAPersonRow:s}))}}]),t}(r.a.Component);l.a.render(r.a.createElement(O,{test:123}),document.getElementById("root"))},9:function(e,t,n){}},[[14,1,2]]]);
//# sourceMappingURL=main.c7981111.chunk.js.map